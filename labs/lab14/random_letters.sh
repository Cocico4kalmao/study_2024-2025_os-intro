#!/bin/bash

# Параметры по умолчанию
COUNT=${1:-20}      # Количество последовательностей
LENGTH=${2:-1}      # Длина каждой последовательности
CASE=${3:-"both"}   # Регистр: lower, upper, both

echo "Генератор случайных букв латинского алфавита"
echo "=============================================="

# Проверяем корректность параметров
if [ "$COUNT" -le 0 ]; then
    echo "Ошибка: Количество должно быть положительным числом"
    exit 1
fi

if [ "$LENGTH" -le 0 ]; then
    echo "Ошибка: Длина должна быть положительным числом"
    exit 1
fi

echo "Генерируем: $COUNT последовательностей"
echo "Длина каждой: $LENGTH букв"
echo "Регистр: $CASE"

# Определяем набор букв в зависимости от регистра
case "$CASE" in
    "lower")
        LETTERS=({a..z})
        echo "Используем только строчные буквы"
        ;;
    "upper") 
        LETTERS=({A..Z})
        echo "Используем только заглавные буквы"
        ;;
    "both"|*)
        LETTERS=({a..z} {A..Z})
        echo "Используем и строчные и заглавные буквы"
        ;;
esac

TOTAL_LETTERS=${#LETTERS[@]}
echo "Всего доступно букв: $TOTAL_LETTERS"
echo ""

# Генерация случайных последовательностей
echo "Результат:"
echo "----------------------------------------"

for ((i=1; i<=COUNT; i++)); do
    # Генерируем одну последовательность
    sequence=""
    for ((j=1; j<=LENGTH; j++)); do
        # Генерируем случайный индекс от 0 до (TOTAL_LETTERS-1)
        random_index=$((RANDOM % TOTAL_LETTERS))
        sequence="${sequence}${LETTERS[random_index]}"
    done
    
    # Выводим с форматированием
    printf "%-6s: %s\n" "#$i" "$sequence"
    
    # Добавляем пустую строку каждые 10 элементов для удобства чтения
    if [ $((i % 10)) -eq 0 ] && [ "$i" -ne "$COUNT" ]; then
        echo ""
    fi
done

echo "----------------------------------------"
echo "Готово! Сгенерировано $COUNT последовательностей"
echo "Успешно завершено!"
